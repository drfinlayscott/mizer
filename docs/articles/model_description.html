<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Model Description • mizer</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Model Description">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mizer</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/mizer.html">Get Started</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/publications.html">Publications</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/gustavdelius/mizer">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Model Description</h1>
            
      
      <small class="dont-index"><a href="https://github.com/gustavdelius/mizer/edit/master/vignettes/model_description.Rmd">Edit this page.  </a> Source: <a href="https://github.com/gustavdelius/mizer/blob/master/vignettes/model_description.Rmd"><code>vignettes/model_description.Rmd</code></a></small>
      <div class="hidden name"><code>model_description.Rmd</code></div>

    </div>

    
    
<p>In this document we will revisit the presentation of the mizer model given in chapter 3 of the main <a href="https://cran.r-project.org/web/packages/mizer/vignettes/mizer_vignette.pdf">mizer vignette</a> but taking care to separate the essential features of the model that are hard-coded and the various possible specialisations for which mizer provides setup functions. We will not go into detail of how this model is realised in code. Such detail will be provided in the <a href="developer_vignette.html">developer guide.</a></p>
<div id="the-mizer-size-spectrum-model" class="section level1">
<h1 class="hasAnchor">
<a href="#the-mizer-size-spectrum-model" class="anchor"></a>The mizer size-spectrum model</h1>
<div id="consumer-size-spectra" class="section level2">
<h2 class="hasAnchor">
<a href="#consumer-size-spectra" class="anchor"></a>Consumer size spectra</h2>
<p>The model framework builds on two central assumption and a number of lesser standard assumption.</p>
<p>The first central assumption is that an individual can be characterized by its weight <span class="math inline">\(w\)</span> and its species number <span class="math inline">\(i\)</span> only. The aim of the model is to calculate the size spectrum <span class="math inline">\(N_i(w)\)</span>, which is the <em>density</em> of individuals of species <span class="math inline">\(i\)</span> such that <span class="math inline">\(\int_w^{w+dw}N_i(w)dw\)</span> is the <em>number</em> of individuals of species <span class="math inline">\(i\)</span> in the size interval <span class="math inline">\([w,w+dw]\)</span>.</p>
<p>To represent this continuous size spectrum in the computer, the size variable <span class="math inline">\(w\)</span> is discretized into a vector <code>w</code> of discrete weights, providing a grid of sizes spanning the range from the smallest egg size to the largest asymptotic size. These grid values divide the full size range into a finite number of size bins. The size bins should be chosen small enough to avoid the discretisation errors from becoming too big.</p>
<p>In the code the size spectrum is stored as an array such that <code>n[i, a]</code> holds the density <span class="math inline">\(N_i(w_a)\)</span> at weights <span class="math inline">\(w_a=\)</span><code>w[a]</code>, or, if time dependence is included, an array such that <code>n[i, a, u]</code> holds <span class="math inline">\(N_i(w_a,t_u)\)</span>.</p>
<p>Note that, contrary to what one might have expected, <code>n[i, a]</code> is not the <em>number</em> of individuals in a size bin but the <em>density</em> at a grid point. The number of individuals in the size bin between <code>w[a]</code> and <code>w[a+1]=w[a]+dw[a]</code> is only approximately given as <code>n[i, a]*dw[a]</code>, where <code>dw[a]= w[a+1]-w[a]</code>.</p>
<p>The time evolution of the size spectrum is described by the McKendrik-von Foerster equation, which is a transport equation with loss:</p>
<p><span class="math display">\[\begin{equation}
  \label{eq:MvF}
  \frac{\partial N_i(w)}{\partial t} + \frac{\partial g_i(w) N_i(w)}{\partial w} 
  = -\mu_i(w) N_i(w),
\end{equation}\]</span></p>
<p>where individual growth <span class="math inline">\(g_i(w)\)</span> and mortality <span class="math inline">\(\mu_i(w)\)</span> will be described below. This is supplemented by a reproduction equation that describes the production of eggs, to be described below.</p>
<p>This McKendrik-von Foerster equation is approximated in mizer by a finite-difference method (to be described in section …). This allows the <code><a href="../reference/project.html">project()</a></code> method in mizer to project the size spectrum forwards in time: Given the spectrum at one time the <code><a href="../reference/project.html">project()</a></code> method calculates it at a set of later times.</p>
</div>
<div id="resource-size-spectrum" class="section level2">
<h2 class="hasAnchor">
<a href="#resource-size-spectrum" class="anchor"></a>Resource size spectrum</h2>
<p>Besides the fish spectrum there is also a resource spectrum <span class="math inline">\(N_R(w)\)</span>, representing for example the phytoplankton. This extends over a wider size range than the fish spectrum and it is discretized into a vector of weights <code>w_full</code>. The last entries of <code>w_full</code> have to coincide with the entries of <code>w</code>. The resource spectrum is then stored in a vector <code>n_pp</code> such that <code>n_pp[c]</code> =<span class="math inline">\(N_R(\)</span><code>w_full[c]</code><span class="math inline">\()\)</span>.</p>
<p>The time evolution of the resource spectrum is described by a semi-chemostat equation: <span class="math display">\[\begin{equation}
  \label{eq:nb}
  \frac{\partial N_R(w,t)}{\partial t} 
  = r_p(w) \Big[ c_p (w) - N_R(w,t) \Big] - \mu_p(w) N_R(w,t).
\end{equation}\]</span> Here <span class="math inline">\(r_p(w)\)</span> is the population regeneration rate, stored as a vector <code>params@rr_pp[c]</code><span class="math inline">\(=r_p(\)</span><code>w_full[c]</code><span class="math inline">\()\)</span>, and <span class="math inline">\(c_p(w)\)</span> is the carrying capacity in the absence of predation, stored as a vector <code>params@cc_pp[c]</code><span class="math inline">\(=c_p(\)</span><code>w_full[c]</code><span class="math inline">\()\)</span>. The death <span class="math inline">\(\mu_p(w)\)</span> is described in the subsection <a href="#plankton-mortality">Plankton mortality</a>.</p>
</div>
<div id="sec:pref" class="section level2">
<h2 class="hasAnchor">
<a href="#sec:pref" class="anchor"></a>Predator-prey preference</h2>
<p>The preference <span class="math inline">\(\phi_{ij}(w, w_p)\)</span> of an individual of species <span class="math inline">\(i\)</span> and weight <span class="math inline">\(w\)</span> for prey of species <span class="math inline">\(j\)</span> and weight <span class="math inline">\(w_p\)</span> is assumed to factorize as <span class="math display">\[\phi_{ij}(w, w_p)=\theta_{ij}\,\phi_i(w,w_p)\]</span> into a species preference matrix <span class="math inline">\(\theta_{ij}\)</span> and a weight selection function <span class="math inline">\(\phi_i(w, w_p)\)</span>.</p>
<p>The species preference matrix <span class="math inline">\(\theta_{ij}\)</span>, also referred to as the species interaction matrix, is stored in an array <code>interaction[i,j]</code>.</p>
<p>The weight selection function is stored in an array <code>pred_kernel[i,a,c]</code><span class="math inline">\(=\phi_i(\)</span><code>w[a]</code>,<code>w_full[c]</code><span class="math inline">\()\)</span>, i.e., the first index specifies the predator species, the second the predator size class (and ranges only over fish spectrum) and the third index specifies the prey size class and ranges over the entire spectrum.</p>
</div>
<div id="encounter-rate" class="section level2">
<h2 class="hasAnchor">
<a href="#encounter-rate" class="anchor"></a>Encounter rate</h2>
<p>The rate at which a predator of species <span class="math inline">\(i\)</span> and weight <span class="math inline">\(w\)</span> encounters food (mass per time) is determined by summing over all prey species and the resource spectrum and integrating over all prey sizes <span class="math inline">\(w_p\)</span>, weighted by the size selection function <span class="math inline">\(\phi(w,w_p)\)</span>, <span class="math display">\[\begin{equation}
  \label{eq:1}
  E_{i}(w) = \gamma_i(w) \int \left( N_R(w_p) + \sum_{j} \theta_{ij} N_j(w_p) \right) 
  \phi_i(w,w_p) w_p \, dw_p.
\end{equation}\]</span> The overall prefactor <span class="math inline">\(\gamma_i(w)\)</span> sets the predation power of the predator. It could be interpreted as a search volume and is stored in an array <code>search_vol[i,a]</code> where the first index specifies the species and the second the weight of the predator.</p>
<p>This encouter rate is calculated by the <code><a href="../reference/getEncounter.html">getEncounter()</a></code> function. The integral is approximated by a Riemann sum over all weight brackets. <span class="math display">\[
\text{encounter}[i,a] = \text{search_vol}[i,a]\sum_{k}
\left( n_{pp}[k] + \sum_{j} \theta[i,j] n[j,k] \right) 
  \phi_i\left(w[a],w[k]\right) w[k]\, dw[k].
\]</span></p>
</div>
<div id="consumption" class="section level2">
<h2 class="hasAnchor">
<a href="#consumption" class="anchor"></a>Consumption</h2>
<p>The encountered food is consumed subjected to a standard Holling functional response type II to represent satiation. This determines the <em>feeding level</em> <span class="math inline">\(f_i(w)\)</span>, which is a dimensionless number between 0 (no food) and 1 (fully satiated) so that <span class="math inline">\(1-f_i(w)\)</span> is the proportion of the encountered food that is consumed. The feeding level is given by</p>
<p><span class="math display">\[\begin{equation}
  \label{eq:f}
  f_i(w) = \frac{E_{i}(w)}{E_{e.i}(w) + h_i(w)},
\end{equation}\]</span></p>
<p>where <span class="math inline">\(h_i(w)\)</span> is the maximum consumption rate stored in <code>params@intake_max[i,a]</code>. The rate at which food is consumed is then <span class="math inline">\((1-f_i(w))E_{i}(w)=f_i(w)\, h_i(w)\)</span>.</p>
<p>The feeding level is calculated with the function <code><a href="../reference/getFeedingLevel.html">getFeedingLevel()</a></code>.</p>
</div>
<div id="metabolic-losses" class="section level2">
<h2 class="hasAnchor">
<a href="#metabolic-losses" class="anchor"></a>Metabolic losses</h2>
<p>Some of the consumed food is used to fuel the needs for metabolism and activity and movement, at a rate <span class="math inline">\(\text{metab}_i(w)\)</span>, stored in the array <code>metab[i,a]</code>. The remaining rate, if any, is assimilated with an efficiency <span class="math inline">\(\alpha\)</span> and is then available for growth and reproduction. So the rate at which energy becomes available for growth and reproduction is <span class="math display">\[\begin{equation}
  \label{eq:Er}
  E_{r.i}(w) = \max(0, \alpha f_i(w)\, h_i(w) - \text{metab}_i(w))
\end{equation}\]</span> This is calculated with the <code><a href="../reference/getEReproAndGrowth.html">getEReproAndGrowth()</a></code> function.</p>
</div>
<div id="sec:repro" class="section level2">
<h2 class="hasAnchor">
<a href="#sec:repro" class="anchor"></a>Investment into reproduction</h2>
<p>A proportion <span class="math inline">\(\psi_i(w)\)</span> of the energy available for growth and reproduction is used for reproduction. This proportion should change from zero below the<br>
weight <span class="math inline">\(w_{m.i}\)</span> of maturation to one at the asymptotic weight <span class="math inline">\(w_{\infty.i}\)</span>, where all available energy is used for reproduction. This proportion is stored in an array <code>psi[i,a]</code><span class="math inline">\(=\psi_i(w_a)\)</span>.</p>
<p>The total production rate of egg production <span class="math inline">\(R_{p.i}\)</span> (numbers per time) is found by integrating the contribution from all individuals of species <span class="math inline">\(i\)</span>: <span class="math display">\[\begin{equation}
  \label{eq:Rp}
  R_{p.i} = \frac{\epsilon}{2 w_0} \int N_i(w)  E_{r.i}(w) \psi_i(w) \, dw,
\end{equation}\]</span> where the individual contribution is obtained by multiplying the rate at which the individual allocates energy to reproduction by an efficiency factor <span class="math inline">\(\epsilon\)</span> and then dividing by the egg weight <span class="math inline">\(w_0\)</span> to convert the energy into number of eggs. The result is multiplied by a factor <span class="math inline">\(1/2\)</span> to take into account that only females reproduce.</p>
</div>
<div id="growth" class="section level2">
<h2 class="hasAnchor">
<a href="#growth" class="anchor"></a>Growth</h2>
<p>What is left over after metabolism and reproduction is taken into account is invested in somatic growth. Thus the growth rate is <span class="math display">\[\begin{equation}
  \label{eq:growth}
  g_i(w) = E_{r.i}(w)\left(1-\psi_i(w)\right).
\end{equation}\]</span> It is calculated by the <code><a href="../reference/getEGrowth.html">getEGrowth()</a></code> function.</p>
<p>When food supply does not cover the requirements of metabolism and activity, growth and reproduction stops, i.e. there is no negative growth. The individual should then be subjected to a starvation mortality, but starvation mortality is not implemented in mizer at the moment.</p>
</div>
<div id="recruitment" class="section level2">
<h2 class="hasAnchor">
<a href="#recruitment" class="anchor"></a>Recruitment</h2>
</div>
<div id="mortality" class="section level2">
<h2 class="hasAnchor">
<a href="#mortality" class="anchor"></a>Mortality</h2>
<p>The mortality rate of an individual <span class="math inline">\(\mu_i(w)\)</span> has three sources: predation mortality <span class="math inline">\(\mu_{p.i}(w)\)</span>, background mortality <span class="math inline">\(\mu_{b.i}(w)\)</span> and fishing mortality <span class="math inline">\(\mu_{f.i}(w)\)</span>.</p>
<p>Predation mortality is calculated such that all that is eaten translates into corresponding predation mortalities on the ingested prey individuals. Recalling that <span class="math inline">\(1-f_j(w)\)</span> is the proportion of the food encountered by a predator of species <span class="math inline">\(j\)</span> and weight <span class="math inline">\(w\)</span> that is actually consumed, the rate at which all predators of species <span class="math inline">\(j\)</span> consume prey of size <span class="math inline">\(w_p\)</span> is <span class="math display">\[\begin{equation}
  \label{eq:pred_rated}
  \text{pred_rate}_j(w_p) = \int \phi_j(w,w_p) (1-f_j(w))
  \gamma_j(w) N_j(w) \, dw.
\end{equation}\]</span> This predation rate is calculated by the function <code><a href="../reference/getPredRate.html">getPredRate()</a></code>. The integral is approximated by a Riemann sum over all fish weight brackets. <span class="math display">\[
\text{pred_rate}[j,c] = \sum_{a}
  \text{pred_kernel}[j,a,c]\,(1-\text{feeding_level}[j,a])\,
  \gamma[j,a]\,n[j,a]\,dw[a].
\]</span></p>
<p>The mortality rate due to predation is then obtained as <span class="math display">\[\begin{equation}
  \label{eq:mup}
  \mu_{p.i}(w_p) = \sum_j \text{pred_rate}_j(w_p)\, \theta_{ji}.
\end{equation}\]</span> This predation mortality rate is calculated by the function <code><a href="../reference/getPredMort.html">getPredMort()</a></code>.</p>
<p>Background mortality <span class="math inline">\(\mu_{b .i}(w)\)</span> is stored in the array <code>params@mu_b[i,a]</code>.</p>
<p>Fishing mortality <span class="math inline">\(\mu_{f.i}(w)\)</span> will be discussed in section [Fishing].</p>
<p>The total mortality rate <span class="math display">\[\mu_i(w)=\mu_{p.i}(w)+\mu_{b.i}(w)+\mu_{p.i}(w)\]</span> is calculated with the function <code><a href="../reference/getMort.html">getMort()</a></code>.</p>
</div>
<div id="plankton-mortality" class="section level2">
<h2 class="hasAnchor">
<a href="#plankton-mortality" class="anchor"></a>Plankton Mortality</h2>
<p>The predation mortality rate on plankton is given by a similar expression as the predation mortality on fish: <span class="math display">\[\begin{equation}
  \label{eq:mupp}
  \mu_{p}(w_p) = \sum_j \text{pred_rate}_j(w_p).
\end{equation}\]</span> This is the only mortality on plankton currently implemented in mizer. It is calculated with the function <code><a href="../reference/getPlanktonMort.html">getPlanktonMort()</a></code>.</p>
</div>
</div>
<div id="optional-further-model-assumptions" class="section level1">
<h1 class="hasAnchor">
<a href="#optional-further-model-assumptions" class="anchor"></a>Optional further model assumptions</h1>
<div id="logarithmically-sized-size-bins" class="section level2">
<h2 class="hasAnchor">
<a href="#logarithmically-sized-size-bins" class="anchor"></a>Logarithmically-sized size bins</h2>
<p>In general the weight grid used by mizer is arbitrary and is stored in the vector <code>params@w</code> for the fish part of the spectrum and in <code>params@w_full</code> for the entire spectrum. The only restriction is that the weights in these vectors are strictly increasing and that the last entries of <code>params@w_full</code> coincide with the entries of <code>params@w</code>.</p>
<p>However by default the weight grid is set up to be logarithmically spaced, so that <code>w[j]=w[1]*exp(j*dx)</code> for some fixed <code>dx</code>. This grid is set up when creating a MizerParams object, see <code><a href="../reference/emptyParams.html">emptyParams()</a></code> for details.</p>
</div>
<div id="sec:ppmr" class="section level2">
<h2 class="hasAnchor">
<a href="#sec:ppmr" class="anchor"></a>Fixed predator/prey mass ratio</h2>
<p>An important simplification occurs when the preference <span class="math inline">\(\phi_i(w,w_p)\)</span> of a predator of size <span class="math inline">\(w\)</span> for prey of size <span class="math inline">\(w_p\)</span> depends on the size of the prey <strong>only</strong> through the predator/prey size ratio <span class="math inline">\(w_p/w\)</span>, <span class="math display">\[\phi_i(w, w_p)=\tilde{\phi}_i(w/w_p).\]</span></p>
<p>The choice of the function is not central. It is currently hard-coded to the truncated log-normal function <span class="math display">\[
  \label{eq:4}
  \tilde{\phi}_i(x) = \begin{cases}
  \exp \left[ \dfrac{-(\ln(x / \beta_i))^2}{2\sigma_i^2} \right]
  &amp;\text{ if }x\in\left[0,\beta_i\exp(3\sigma_i)\right]\\
  0&amp;\text{ otherwise,}
  \end{cases}
\]</span> where <span class="math inline">\(\beta_i\)</span> is the preferred predator-prey mass ratio and <span class="math inline">\(\sigma_i\)</span> the width of the weight selection function.</p>
</div>
<div id="sec:allo" class="section level2">
<h2 class="hasAnchor">
<a href="#sec:allo" class="anchor"></a>Allometric rates</h2>
<p>Mizer has several size-dependent rates for which it is sensible to assume an allometric scaling with size:</p>
<ul>
<li><p>Resource carrying capacity <span class="math display">\[c_p(w)=\kappa\, w^{-\lambda}.\]</span></p></li>
<li><p>Resource growth rate <span class="math display">\[r_p(w)= r_p\, w^{n-1}.\]</span></p></li>
<li><p>Search volume <span class="math display">\[\gamma_i(w) = \gamma_i\, w^q.\]</span></p></li>
<li><p>Maximum intake rate <span class="math display">\[h_i(w) = h_i\, w^n.\]</span></p></li>
<li><p>Metabolic loss This is made up out of standard metabolism, scaling with exponent <span class="math inline">\(p\)</span>, and loss due to activity and movement, scaling with exponent <span class="math inline">\(1\)</span>: <span class="math display">\[\text{metab}_i(w) = k_{s.i}\,w^p + k_i\,w.\]</span></p></li>
<li><p>Background mortality <span class="math display">\[\mu_{b.i}(w) = \mu_b w_{\infty.i}^{1-n},\]</span> where <span class="math inline">\(w_{\infty.i}\)</span> is the asymptotic size of species <span class="math inline">\(i\)</span>.</p></li>
</ul>
</div>
<div id="sec:invest" class="section level2">
<h2 class="hasAnchor">
<a href="#sec:invest" class="anchor"></a>Investment into reproduction</h2>
<p>The proportion <span class="math inline">\(\psi_i(w)\)</span> that determines how much of the available energy is used for reproduction should be described by a function that starts rising from <span class="math inline">\(0\)</span> at around the maturity size <span class="math inline">\(w_{\text{mat}.i}\)</span> of the species <span class="math inline">\(i\)</span> and reaches <span class="math inline">\(1\)</span> at the asymptotic size <span class="math inline">\(w_{\infty.i}\)</span> of the species.</p>
<p>Mizer provides a default function <span class="math display">\[\psi_i(w)=\begin{cases}
  0 &amp; w &lt; \frac{w_{\text{mat}.i}}{10}\\
  \left(1+\left(\frac{w}{w_{\text{mat}.i}}\right)^{10}\right)^{-1}
  \left(\frac{w}{w_{\infty.i}}\right)^{1-n} &amp; 
  \frac{w_{\text{mat}.i}}{10} \leq w \leq w_{\infty.i}\\
  1 &amp; w&gt;w_{\infty.i}.
\end{cases}
\]</span></p>
</div>
<div id="eq:gamma" class="section level2">
<h2 class="hasAnchor">
<a href="#eq:gamma" class="anchor"></a>Volumetric search rate</h2>
<p>The system is driven by the production of the plankton The ratio between the production and the maximum consumption will determine the feeding level <span class="math inline">\(f_0\)</span> of small individuals feeding mainly on the plankton If <span class="math inline">\(f_0\)</span> is close to 1 the individuals are satiated, and growth will be largely independent of changes in food availability. If <span class="math inline">\(f_0\)</span> is in the linear range of the functional response, growth will be dependent on available food. If <span class="math inline">\(f_0\)</span> is close to the critical feeding level <span class="math inline">\(f_c\)</span>, where the available food is only sufficient to cover standard metabolism, growth will be stunted. The initial feeding level <span class="math inline">\(f_0\)</span>, calculated as the feeding level of an individual feeding on the plankton at carrying capacity, is used as the control parameter for the plankton productivity. The initial feeding level is then used to calculate the search rate parameter <span class="math inline">\(\gamma.\)</span></p>
<p><span class="math display">\[\begin{equation}
  \gamma_i(f_0) = \frac{f_0 h_i \beta_i^{2-\lambda}\exp(-(\lambda-2)^2 \sigma_i^2/2)}{(1-f_0)\sqrt{2\pi}\kappa \sigma_i}.
\end{equation}\]</span></p>
<p>Here the critical feeding level <span class="math inline">\(f_c\)</span> is given by the equation</p>
<p><span class="math display">\[\begin{equation}
  f_{c.i}(w) = \frac{k_{s.i} w^p+k_i w}{\alpha h_i w^n}.
\end{equation}\]</span></p>
<p>If <span class="math inline">\(n=p\)</span> and <span class="math inline">\(k=0\)</span> (which is the case for the set of default parameters chosen here), <span class="math inline">\(f_c\)</span> is independent of <span class="math inline">\(w\)</span>.</p>
</div>
<div id="sec:recruitment" class="section level2">
<h2 class="hasAnchor">
<a href="#sec:recruitment" class="anchor"></a>Stock-recruitment relationship</h2>
<p>In mizer, density dependence is modelled as a compensation on the egg production. This can be considered as the stock-recruitment relationship (SRR). The default functional form is such that the recruitment flux <span class="math inline">\(R_i\)</span> (numbers per time) approaches a maximum recruitment as the egg production increases, modelled mathematically analogous to the Holling type II function response as a <em>Beverton-Holt</em> type of SRR:</p>
<p><span class="math display">\[\begin{equation}
  \label{eq:R}
  R_i = R_{\max.i} \frac{R_{p.i}}{R_{p.i} + R_{\max.i}},
\end{equation}\]</span> where <span class="math inline">\(R_{\max.i}\)</span> is the maximum recruitment flux of each trait class (Figure~).</p>
<p>The <em>Beverton-Holt</em> type of SRR is not the only density dependence model that mizer can use. Users are able to write their own model so it is possible to set a range of SRRs, e.g. fixed recruitment (as used in the community-type model) or <em>hockey-stick.</em> <!--
# Fishing
This section still to be written.
--></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#the-mizer-size-spectrum-model">The mizer size-spectrum model</a><ul class="nav nav-pills nav-stacked">
<li><a href="#consumer-size-spectra">Consumer size spectra</a></li>
      <li><a href="#resource-size-spectrum">Resource size spectrum</a></li>
      <li><a href="#sec:pref">Predator-prey preference</a></li>
      <li><a href="#encounter-rate">Encounter rate</a></li>
      <li><a href="#consumption">Consumption</a></li>
      <li><a href="#metabolic-losses">Metabolic losses</a></li>
      <li><a href="#sec:repro">Investment into reproduction</a></li>
      <li><a href="#growth">Growth</a></li>
      <li><a href="#recruitment">Recruitment</a></li>
      <li><a href="#mortality">Mortality</a></li>
      <li><a href="#plankton-mortality">Plankton Mortality</a></li>
      </ul>
</li>
      <li>
<a href="#optional-further-model-assumptions">Optional further model assumptions</a><ul class="nav nav-pills nav-stacked">
<li><a href="#logarithmically-sized-size-bins">Logarithmically-sized size bins</a></li>
      <li><a href="#sec:ppmr">Fixed predator/prey mass ratio</a></li>
      <li><a href="#sec:allo">Allometric rates</a></li>
      <li><a href="#sec:invest">Investment into reproduction</a></li>
      <li><a href="#eq:gamma">Volumetric search rate</a></li>
      <li><a href="#sec:recruitment">Stock-recruitment relationship</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Finlay Scott, Julia Blanchard, Ken Andersen, Gustav Delius.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9001.</p>
</div>
      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'de91577b2f58755afaa137388a513a88',
    indexName: 'mizer',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
